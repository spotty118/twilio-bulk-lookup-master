<div id="dashboard_stats">
  <%= turbo_stream_from "dashboard_stats" %>
  <%
    # Load pre-aggregated stats for faster dashboard rendering
    stats = local_assigns.fetch(:stats, DashboardStats.current)

    total_count = stats.total_contacts.to_i
    pending_count = stats.pending_count.to_i
    processing_count = stats.processing_count.to_i
    completed_count = stats.completed_count.to_i
    failed_count = stats.failed_count.to_i

    completion_percentage = total_count > 0 ? (completed_count.to_f / total_count * 100).round(1) : 0
  %>

  <div class="blank_slate_container" id="dashboard_default_message">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">

      <!-- Total Contacts Card -->
      <div class="stat-card" style="--card-accent-color: var(--color-primary);">
        <div class="stat-number">
          <%= total_count %>
        </div>
        <div class="stat-label">
          Total Contacts
        </div>
      </div>

      <!-- Pending Card -->
      <div class="stat-card" style="--card-accent-color: var(--color-info);">
        <div class="stat-number">
          <%= pending_count %>
        </div>
        <div class="stat-label">
          Pending
        </div>
      </div>

      <!-- Processing Card -->
      <div class="stat-card" style="--card-accent-color: #f093fb;">
        <div class="stat-number">
          <%= processing_count %>
        </div>
        <div class="stat-label">
          Processing
        </div>
      </div>

      <!-- Completed Card -->
      <div class="stat-card" style="--card-accent-color: var(--color-success);">
        <div class="stat-number">
          <%= completed_count %>
        </div>
        <div class="stat-label">
          Completed
        </div>
      </div>

      <!-- Failed Card -->
      <div class="stat-card" style="--card-accent-color: var(--color-danger);">
        <div class="stat-number">
          <%= failed_count %>
        </div>
        <div class="stat-label">
          Failed
        </div>
      </div>

      <!-- Success Rate Card -->
      <div class="stat-card" style="--card-accent-color: #00D4AA;">
        <div class="stat-number">
          <%= completion_percentage %>%
        </div>
        <div class="stat-label">
          Success Rate
        </div>
      </div>
    </div>
  </div>

  <!-- Progress Bar -->
  <% if total_count > 0 %>
    <div class="progress-bar">
      <div class="progress-fill" style="width: <%= completion_percentage %>%;">
        <%= completed_count %> / <%= total_count %> Complete
      </div>
    </div>
  <% end %>
</div>
